{"version":3,"file":"src_pages_FilteredVideos_js-ed8fb8e888b9d1c584f6.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AAAA;;AAAA;;AACA;AAAA;;AAAA;;AACA;;AADA;AA6BA;AAAA;AAAA;AACA;AACA;;AAEA;AAAA;AAAA;AACA;AAGA;;AAEA;AACA;AACA;AACA;AACA;AAJA;AAMA;AAEA;AACA;AACA;AAFA;AAIA;AACA;AACA;;AAnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAFA;AAaA;;AAdA;AAAA;AAAA;AAiBA;AACA;AAlBA;AAAA;AAAA;AAoBA;;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AA3BA;AAAA;AAAA;AAyDA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAiBA;AAxFA;;AAAA;AAAA;AA2FA","sources":["webpack://omniscraper_frontend/./src/pages/FilteredVideos.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { withRouter } from \"react-router\";\nconst List = React.lazy(() => import(\"../components/List\"));\n\nexport class FilteredVideos extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: false,\n      loading: false,\n      videos: [],\n      loadingTags: false,\n      slug: this.props.match.params.slug,\n      limit: 12,\n      offset: 0,\n      hasMore: true,\n      videosLoadingError: false,\n    };\n  }\n\n  componentDidMount() {\n    this.loadVideos();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.match.params.slug !== this.props.match.params.slug) {\n      this.setState(\n        { slug: this.props.match.params.slug, videos: [], offset: 0 },\n        () => this.loadVideos()\n      );\n    }\n  }\n\n  loadVideos = () => {\n    const { limit, offset } = this.state;\n    const slug = this.props.match.params.slug;\n    const url = `/api/tags/${slug}?limit=${limit}&offset=${offset}`;\n\n    this.setState({ loading: true }, () => {\n      axios\n        .get(url)\n        .then((res) => {\n          const newVideos = res.data.videos;\n\n          this.setState({\n            loading: false,\n            videos: [...this.state.videos, ...newVideos],\n            offset: offset + limit,\n            hasMore: res.data.has_more,\n          });\n        })\n        .catch((err) => {\n          this.setState({\n            error: err.message,\n            loading: false,\n          });\n        });\n    });\n  };\n\n  render() {\n    const { loading, videos, hasMore, videosLoadingError } = this.state;\n    const {\n      classes,\n      loggedIn,\n      videoTags,\n      loadTags,\n      location,\n      handleScrollPosition,\n    } = this.props;\n    const pathParams = location.pathname.split(\"/\");\n    const clickedTag = pathParams[pathParams.length - 1];\n\n    return (\n      <>\n        <List\n          loggedIn={loggedIn}\n          videos={videos}\n          videoTags={videoTags}\n          loading={loading}\n          hasMore={hasMore}\n          error={videosLoadingError}\n          loadVideos={this.loadVideos}\n          loadTags={loadTags}\n          clickedTag={clickedTag}\n          scrollPosition={0}\n          handleScrollPosition={handleScrollPosition}\n        />\n\n        {/* {!hasMore && <div>No more videos</div>} */}\n      </>\n    );\n  }\n}\n\nexport default withRouter(FilteredVideos);\n"],"names":[],"sourceRoot":""}